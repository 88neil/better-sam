<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>SAM: Software Automatic Mouth</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      max-width: 900px;
      margin: 0 auto;
      font-family: 'Poppins', sans-serif;
      box-sizing: border-box;
      padding: 1.5rem;
      background: #121212;
      color: #e5e5e5;
    }
    h1, h2 {
      text-align: center;
      margin-bottom: 0.5em;
      color: #ffffff;
    }
    p {
      color: #bbbbbb;
      line-height: 1.6;
    }
    label {
      display: block;
      margin-top: 1rem;
      font-weight: 600;
    }
    textarea {
      width: 100%;
      padding: 1rem;
      font-size: 1.2rem;
      margin-top: 0.5rem;
      border-radius: 10px;
      border: none;
      background: #1e1e1e;
      color: #ffffff;
      box-sizing: border-box;
      resize: vertical;
      min-height: 200px; /* Big default size */
    }
    textarea:focus {
      outline: 2px solid #3a86ff;
    }
    input[type="range"] {
      width: 100%;
      accent-color: #3a86ff;
    }
    .range-label {
      display: block;
      margin-top: 1rem;
      font-weight: 600;
    }
    .button-row {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
      flex-wrap: wrap;
    }
    input[type="button"] {
      flex: 1;
      padding: 0.9rem;
      font-size: 1rem;
      cursor: pointer;
      border-radius: 10px;
      border: none;
      background: #3a86ff;
      color: white;
      font-weight: 600;
      transition: background 0.2s;
    }
    input[type="button"]:hover {
      background: #2a5ec4;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1.5rem;
      background: #1a1a1a;
      color: #ccc;
    }
    th, td {
      padding: 0.5rem;
      border: 1px solid #333;
    }
    th {
      background: #222;
      color: #fff;
    }
    a {
      color: #3a86ff;
      cursor: pointer;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    hr {
      border: none;
      height: 1px;
      background: #333;
      margin: 2rem 0;
    }
  </style>
</head>
<body>
<h1>SAM: Software Automatic Mouth</h1>
<h2>What is SAM?</h2>
<p>
SAM is a small Text-To-Speech (TTS) program written in JavaScript, adapted from the 1982 Commodore C64 software.
</p>

<script src="dist/samjs.min.js"></script>
<script>
  const opts = {debug: 1, pitch: 64, speed: 72, mouth: 128, throat: 128};
  const presets = {
    sam:               {speed: 72, pitch: 64, throat: 128, mouth: 128},
    elf:               {speed: 72, pitch: 64, throat: 110, mouth: 160},
    little_robot:      {speed: 92, pitch: 60, throat: 190, mouth: 190},
    stuffy_guy:        {speed: 82, pitch: 72, throat: 110, mouth: 105},
    little_old_lady:   {speed: 82, pitch: 32, throat: 145, mouth: 145},
    extra_terrestrial: {speed: 100, pitch: 64, throat: 150, mouth: 200},
  };

  document.addEventListener('DOMContentLoaded', function() {
    const input = document.getElementById('speechinput');
    const controls = {};

    const setOpt = (name, value) => {
      opts[name] = value;
      controls[name].value = value;
      document.getElementById(name + '-lbl').innerText =
        `${name.charAt(0).toUpperCase() + name.substring(1)}: ${value}`;
    };

    ['speed', 'pitch', 'mouth', 'throat'].forEach(
      (name) => {
        const e = document.getElementById(name);
        controls[name] = e;
        e.oninput = function (e) {
          setOpt(e.target.id, e.target.value);
        };
        e.value = opts[name];
      }
    );

    const selectPreset = (name) => {
      const values = presets[name];
      ['speed', 'pitch', 'mouth', 'throat'].forEach((n) => {
        setOpt(n, values[n]);
      });
    };

    selectPreset('sam');
    Object.keys(presets).forEach((preset) => {
      document.getElementById('preset_' + preset)
        .addEventListener('click', () => selectPreset(preset));
    });

    let speech;
    const speakNow = () => {
      if (speech) speech.abort();
      speech = (new SamJs(opts)).speak(input.value);
      speech.catch(() => {});
    };

    document.getElementById('say').addEventListener('click', speakNow);
    document.getElementById('download').addEventListener('click', function () {
      (new SamJs(opts)).download(input.value);
    });

    // Press Enter to Speak
    input.addEventListener('keydown', function(e) {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        speakNow();
      }
    });
  });
</script>

<hr>
<form>
  <h2>Speak</h2>
  <label for="speechinput">Text to speak:</label>
  <textarea id="speechinput">Hello, my name is SAM.</textarea>

  <label id="pitch-lbl" class="range-label">Pitch: 64</label>
  <input type="range" id="pitch" min="0" max="255" />

  <label id="speed-lbl" class="range-label">Speed: 72</label>
  <input type="range" id="speed" min="1" max="255" />

  <label id="mouth-lbl" class="range-label">Mouth: 128</label>
  <input type="range" id="mouth" min="0" max="255" />

  <label id="throat-lbl" class="range-label">Throat: 128</label>
  <input type="range" id="throat" min="0" max="255" />

  <div class="button-row">
    <input type="button" id="say" value="Say">
    <input type="button" id="download" value="Download">
  </div>
</form>

<hr>
<h2>Presets</h2>
<table>
  <thead>
    <tr><th>Description</th><th>Speed</th><th>Pitch</th><th>Throat</th><th>Mouth</th></tr>
  </thead>
  <tbody>
    <tr><td><a id="preset_sam">SAM</a></td><td>72</td><td>64</td><td>128</td><td>128</td></tr>
    <tr><td><a id="preset_elf">Elf</a></td><td>72</td><td>64</td><td>110</td><td>160</td></tr>
    <tr><td><a id="preset_little_robot">Little Robot</a></td><td>92</td><td>60</td><td>190</td><td>190</td></tr>
    <tr><td><a id="preset_stuffy_guy">Stuffy Guy</a></td><td>82</td><td>72</td><td>110</td><td>105</td></tr>
    <tr><td><a id="preset_little_old_lady">Little Old Lady</a></td><td>82</td><td>32</td><td>145</td><td>145</td></tr>
    <tr><td><a id="preset_extra_terrestrial">Extra-Terrestrial</a></td><td>100</td><td>64</td><td>150</td><td>200</td></tr>
  </tbody>
</table>

<hr>
<a href="https://github.com/discordier/sam">GitHub Repository with the source code</a> |
<a href="./demos.html">List with some demos</a>
</body>
</html>
